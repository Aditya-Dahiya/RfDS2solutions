---
title: "Chapter 25"
author: "Aditya Dahiya"
subtitle: "Web scraping"
date: 2023-10-06
execute: 
  echo: true
  warning: false
  error: false
  cache: true
filters:
  - social-share
share:
  permalink: "https://aditya-dahiya.github.io/RfDS2solutions/Chapter25.html"
  description: "Solutions: R for Data Science (2e)"
  twitter: true
  facebook: true
  linkedin: true
  email: true
editor_options: 
  chunk_output_type: console
bibliography: references.bib
---

Experiment scraping the Wikipedia page of fighter aircrafts

```{r}
# Load libraries
library(tidyverse)
library(rvest)

url <- "https://en.wikipedia.org/wiki/List_of_fighter_aircraft"

url_html <- read_html(url)

df <- url_html |>
  html_element("table") |>
  html_table() |>
  rename(
    numbers = `No.`,
    year = Date
  ) |>
  janitor::clean_names() |>
  mutate(
    numbers = parse_number(numbers),
    class = str_replace_all(class, 
                            pattern = "\"", 
                            replacement = "")
  )

# A pie chart of all aircrafts ever made

df |>
  mutate(
    country = fct(country)
  ) |>
  group_by(country) |>
  count(wt = numbers)


  group_by(country, status) |>
  summarize(
    total_aircrafts = sum(numbers),
    total_types = n_distinct(type)
  ) |>
  ungroup()
  group_by(country)
```
