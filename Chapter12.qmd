---
title: "Chapter 12"
author: "Aditya Dahiya"
subtitle: "Communication"
date: 2023-08-28
execute: 
  warning: false
  error: false
  cache: true
filters:
  - social-share
share:
  permalink: "https://aditya-dahiya.github.io/RfDS2solutions/Chapter12.html"
  description: "Solutions: R for Data Science (2e)"
  twitter: true
  facebook: true
  linkedin: true
  email: true
editor_options: 
  chunk_output_type: console
bibliography: references.bib
---

Important lessons from [R for Data Science 2nd Edition](https://r4ds.hadley.nz/), [Chapter 12](https://r4ds.hadley.nz/communication#introduction): --

> **The purpose of a plot title is to summarize the main finding**. Avoid titles that just describe what the plot is, e.g., *"A scatterplot of engine displacement vs.Â fuel economy"*.

```{r}
#| label: setup

library(tidyverse)
library(scales)
library(ggrepel)
library(patchwork)
```

# **12.2.1 Exercises**

### Question 1

**Create one plot on the fuel economy data with customized `title`, `subtitle`, `caption`, `x`, `y`, and `color` labels.**

The plot is shown below in @fig-q1-ex2.

```{r}
#| label: fig-q1-ex2
#| fig-cap: "Scatter plot of highway mileage vs. engine displacement for different class of vehicles"


data(mpg)
mpg |>
  ggplot(aes(x = displ,
             y = hwy,
             col = as_factor(class)
             )
         ) +
  geom_point() +
  labs(title = "Higher displacement vehicles have lower mileage",
       subtitle = "2-seater sports cars have high mileage despite higher displacements",
       x = "Engine Displacement (in liters)",
       y = "Highway Mileage (miles per gallon)",
       caption = "Data from mpg dataset",
       color = "Vehicle Class") +
  theme(legend.position = "right") +
  scale_color_viridis_d()
```

### Question 2

**Recreate the following plot using the fuel economy data. Note that both the colors and shapes of points vary by type of drive train.**

```{r}
#| label: fig-q2-ex2
#| fig-cap: "A scatter-plot of highway vs city MPG to recreate the plot shown in question"

mpg |>
  ggplot(aes(x = cty,
             y = hwy,
             shape = drv,
             col = drv)) +
  geom_point() +
  labs(x = "City MPG", y = "Highway MPG",
       col = "Type of \ndrive train",
       shape = "Type of \ndrive train")
```

### Question 3

**Take an exploratory graphic that you've created in the last month, and add informative titles to make it easier for others to understand.**

I use a figure produced for Question 5 of Exercise 11.5.3.1 to demonstrate outliers in the `diamonds` dataset, based on a combination of `x` and `y` attributes of various diamonds.

```{r}
#| label: fid-q3-ex2
#| fig-cap: "A scatter plot of x and y dimensions of a diamond to detect outliers"
#| fig-cap-location: top

diamonds |>    
    mutate(res_lm = (lm(diamonds$y ~ diamonds$x)$residuals)) |>
    filter(x >= 4) |>
    mutate(res_lm = res_lm < -1 | res_lm > 1) |>
    rowid_to_column() |>
    mutate(rowid = ifelse(res_lm, rowid, NA)) |>
    ggplot(aes(x = x, 
               y = y,
               label = scales::comma(rowid))) +   
    geom_point(alpha = 0.2) +
    coord_cartesian(xlim = c(4, 11), ylim = c(4, 11)) +
    ggrepel::geom_text_repel(size = 3) +
    labs(x = "Length of diamond, in mm (x)", 
         y = "Width of diamond, in mm (y)",
         title = "Certain diamonds have an abnormal shape",
         subtitle = "The labelled diamonds, with their IDs shown, have excessive length or width",
         caption = "Data from diamonds data-set, ggplot2") +
  theme_light()
```

# **12.3.1 Exercises**

### Question 1

**Use [`geom_text()`](https://ggplot2.tidyverse.org/reference/geom_text.html) with infinite positions to place text at the four corners of the plot.**

### Question 2

**Use [`annotate()`](https://ggplot2.tidyverse.org/reference/annotate.html) to add a point geom in the middle of your last plot without having to create a tibble. Customize the shape, size, or color of the point.**

### Question 3

**How do labels with [`geom_text()`](https://ggplot2.tidyverse.org/reference/geom_text.html) interact with faceting? How can you add a label to a single facet? How can you put a different label in each facet? (Hint: Think about the dataset that is being passed to [`geom_text()`](https://ggplot2.tidyverse.org/reference/geom_text.html).)**

### Question 4

**What arguments to [`geom_label()`](https://ggplot2.tidyverse.org/reference/geom_text.html) control the appearance of the background box?**

### Question 5

**What are the four arguments to [`arrow()`](https://rdrr.io/r/grid/arrow.html)? How do they work? Create a series of plots that demonstrate the most important options.**
