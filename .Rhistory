flights |>
group_by(year, month, day) |>
summarise(n=n(),
.groups = "keep")
flights |>
group_by(year, month, day) |>
summarise(n=n(),
.groups = "drop")
flights |>
group_by(year, month, day) |>
summarise(n=n(),
.groups = "drop_last")
flights |>
group_by(year, month, day) |>
summarise(n=n())
flights |>
group_by(year, month, day) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE),
n=n())
flights |>
group_by(year, month, day) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE),
number=n())
flights |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE),
number=n())
names(flights)
flights |>
group_by(carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay))
flights |>
group_by(carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max()
flights |>
group_by(carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(n=1, order_by = arr_delay)
flights |>
group_by(carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = arr_delay)
?slice_max
flights |>
group_by(carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = arr_delay, n = 1)
flights |>
group_by(carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1)
flights |>
group_by(carrier, dest) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1)
lights |>
group_by(carrier, dest) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
summarise(n = n())
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
summarise(n = n(), .by = carrier)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
summarise(n = n(), .by = carrier)
flights |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE), .by = c(dest, carrier)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
summarise(n = n(), .by = carrier)
flights |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE), .by = c(dest, carrier))
flights |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE), by = c(dest, carrier)) |>
slice_max(order_by = avg_delay, n = 1, by = c(dest, carrier)) |>
summarise(n = n(), .by = carrier)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
`flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup()
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
summarise(n = n(), .by = carrier)
flights |> group_by(carrier, dest) |> summarize(n())
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup()
flights |>
group_by(carrier, dest) |>
summarize(n())
names(flights)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
summarise(n = n(), .by = carrier) |>
slice_head(n=5)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
summarise(n = n(), .by = carrier) |>
slice_head(n=5) |>
arrange(desc(n))
slice_head(n=5)|>
arrange(desc(n))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
# taking the highest average delay flight at each airport
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
# for each airline, summarize the number of airports where it is
# the most delayed airline
summarise(`Number of Airports` = n(), .by = carrier) |>
rename(Carrier = carrier) |>
slice_head(n=5)|>
arrange(desc(n))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
# taking the highest average delay flight at each airport
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
# for each airline, summarize the number of airports where it is
# the most delayed airline
summarise(n = n(), .by = carrier) |>
slice_head(n=5)|>
arrange(desc(n))
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
# taking the highest average delay flight at each airport
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
# for each airline, summarize the number of airports where it is
# the most delayed airline
summarise(n = n(), .by = carrier) |>
slice_head(n=5)|>
arrange(desc(n)) |>
rename(Carrier = carrier,
`Number of Airports` = n)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
# taking the highest average delay flight at each airport
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
# for each airline, summarize the number of airports where it is
# the most delayed airline
summarise(n = n(), .by = carrier) |>
slice_head(n=5)|>
arrange(desc(n)) |>
rename(Carrier = carrier,
Number of Airports = n)
flights |>
group_by(dest, carrier) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
# taking the highest average delay flight at each airport
slice_max(order_by = avg_delay, n = 1) |>
ungroup() |>
# for each airline, summarize the number of airports where it is
# the most delayed airline
summarise(n = n(), .by = carrier) |>
slice_head(n=5)|>
arrange(desc(n)) |>
rename(Carrier = carrier,
`Number of Airports` = n)
names(flights)
flights |>
group_by(dest) |>
slice_max(n=1, by = dep_delay)
flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay)
flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay) |>
select(dest, flight, origin, dep_delay, month, day)
flights |>
# group_by(dest) |>
slice_max(n=1, order_by = dep_delay) |>
select(dest, flight, origin, dep_delay, month, day)
flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay) |>
select(dest, flight, origin, dep_delay, month, day)
flights |>
# group_by(dest) |>
slice_max(n=1, order_by = dep_delay, by = dest) |>
select(dest, flight, origin, dep_delay, month, day)
# Option 2
flights |>
slice_max(n=1, order_by = dep_delay, by = dest) |>
select(dest, flight, origin, dep_delay, month, day)
# Option 2
flights |>
slice_max(n=1, order_by = dep_delay, by = dest) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay))
# Option 1: Group by "dest" and then use slice_max
flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay))
# Option 1: Group by "dest" and then use slice_max
a = flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay))
# Option 2
b = flights |>
slice_max(n=1, order_by = dep_delay, by = dest) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay))
a == b
View(a)
View(b)
?arrange
# Option 1: Group by "dest" and then use slice_max
a = flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
# Option 2
b = flights |>
slice_max(n=1, order_by = dep_delay, by = dest) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
a == b
View(a)
View(b)
NA >> 100
NA > 100
# Option 1: Group by "dest" and then use slice_max
a = flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay, na_rm = TRUE) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
# Option 2
b = flights |>
slice_max(n=1, order_by = dep_delay, by = dest, na_rm = TRUE) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
a == b
assertthat::are_equal(a, b)
assertthat::are_equal(10, 10)
assertthat::are_equal(1:10, 1:10)
assertthat::are_equal(a, b)
sum(a != b)
# Option 1: Group by "dest" and then use slice_max
a = flights |>
group_by(dest) |>
slice_max(n=1, order_by = dep_delay, na_rm = TRUE) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
# Option 2: Directly use slice_max() with ".by" argument
b = flights |>
slice_max(n=1, order_by = dep_delay, .by = dest, na_rm = TRUE) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
# Option 2: Directly use slice_max() with "by" argument
b = flights |>
slice_max(n=1, order_by = dep_delay, by = dest, na_rm = TRUE) |>
select(dest, flight, origin, dep_delay, month, day) |>
arrange(desc(dep_delay), desc(flight))
# Check results
sum(a != b)
?gt
b |> slice_head(n=5) |> gt()
names(flights)
flights |>
group_by(dep_time) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE))
flights |>
group_by(dep_time) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = dep_time, y = avg_delay)) +
geom_line() +
theme_bw() +
labs(x = "Departure time",
y = "Average delay in minutes")
a = flights |>
group_by(dep_time) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE))
summary(a)
plot(a$dep_time)
View(a)
names(flights)
flights |>
group_by(sched_dep_time) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = sched_dep_time, y = avg_delay)) +
geom_line() +
theme_bw() +
labs(x = "Departure time",
y = "Average delay in minutes")
a = flights |>
group_by(sched_dep_time) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE))
plot(a$dep_time)
plot(a$sched_dep_time)
View(a)
lubridate::hm(a$sched_dep_time)
flights |>
group_by(sched_dep_time) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = sched_dep_time, y = avg_delay)) +
geom_line() +
geom_smooth(color = "red", se = FALSE) +
theme_bw() +
labs(x = "Departure time",
y = "Average delay in minutes")
?slice_min
names(flights)
flights |>
filter(dest = "IAH") |>
group_by(dest, origin) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay))
flights |>
filter(dest == "IAH") |>
group_by(dest, origin) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay))
flights |>
filter(dest == "JFK") |>
group_by(dest, origin) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay))
flights |>
filter(dest == "JFK")
flights |>
filter(origin == "JFK") |>
group_by(origin, dest)
flights |>
filter(origin == "JFK") |>
group_by(origin, dest) |>
summarise(avg_delay = mean(arr_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay))
flights |>
filter(origin == "JFK") |>
group_by(origin, dest) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay))
flights |>
filter(origin == "JFK") |>
group_by(origin, dest) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay)) |>
slice_head(n = 10)
flights |>
filter(origin == "JFK") |>
group_by(dest) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay)) |>
slice_head(n = 10)
flights |>
filter(origin == "JFK") |>
group_by(origin, dest) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay)) |>
slice_head(n = 10) |>
ungroup()
a = flights |>
filter(origin == "JFK") |>
group_by(origin, dest) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
arrange(desc(avg_delay)) |>
slice_head(n = 10) |>
ungroup()
a
a |>
slice_min(n = 2)
a |>
slice_min(n = 2, order_by = avg_delay)
a |>
slice_min(n = -2, order_by = avg_delay)
gt(a)
gt(a, digits = 2)
?count
names(flights)
flights |>
group_by(origin, dest) |>
summarise(n = n())
flights |>
group_by(origin, dest) |>
summarise(n = n()) |>
arrange(desc(n))
flights |>
group_by(origin, dest) |>
summarise(n = n()) |>
arrange(desc(n)) |>
slice_head(n = 5)
flights |>
group_by(origin, dest) |>
summarise(n = n()) |>
arrange(desc(n)) |>
ungroup() |>
slice_head(n = 5)
flights |>
count(origin, dest)
flights |>
count(origin, dest) |>
slice_head(n = 5)
flights |>
count(origin, dest) |>
slice_head(n = 5, order_by(n))
flights |>
count(origin, dest)
flights |>
count(origin, dest) |>
arrange(desc(n))
flights |>
count(origin, dest) |>
arrange(desc(n)) |>
slice_head(n = 5)
flights |>
group_by(origin, dest) |>
summarise(n = n()) |>
arrange(desc(n)) |>
ungroup() |>
slice_head(n = 5)
flights |>
count(origin, dest) |>
arrange(desc(n)) |>
slice_head(n = 5)
flights |>
count(origin, dest, sort = TRUE) |>
slice_head(n = 5)
Suppose we have the following tiny data frame:
df <- tibble(x = 1:5,
y = c("a", "b", "a", "a", "b"),
z = c("K", "K", "L", "L", "K") )
df
df |>
group_by(y)
df |> arrange(y)
df |>
group_by(y) |>
summarize(mean_x = mean(x))
df |>
group_by(y, z) |>
summarize(mean_x = mean(x))
df |>
group_by(y, z) |>
summarize(mean_x = mean(x), .groups = "drop")
df
# Code Chunk 1
df |>
group_by(y, z) |>
summarize(mean_x = mean(x))
# Code Chunk 2
df |>
group_by(y, z) |>
mutate(mean_x = mean(x))
df <- tibble(x = 1:5,
y = c("a", "b", "a", "a", "b"),
z = c("K", "K", "L", "L", "K") )
df
df
# Code Chunk 1
df |>
group_by(y, z) |>
summarize(mean_x = mean(x))
# Code Chunk 2
df |>
group_by(y, z) |>
mutate(mean_x = mean(x))
