gss_cat|>
mutate(
rincome = fct_lump_prop(rincome, prop = 0.01)
) |>
group_by(rincome) |>
count()
gss_cat|>
mutate(
rincome = fct_lump_n(rincome, n = 6)
) |>
group_by(rincome) |>
count()
gss_cat|>
mutate(
rincome = fct_lump_n(rincome, n = 6)
) |>
group_by(rincome) |>
count() |>
gt() |>
cols_label("Annual Income" = rincome,
"Numbers" = n)
?cols_label
gss_cat|>
mutate(
rincome = fct_lump_n(rincome, n = 6)
) |>
group_by(rincome) |>
count() |>
gt() |>
cols_label(rincome = "Annual Income",
n = "Numbers")
gss_cat|>
mutate(
rincome = fct_lump_n(rincome, n = 6)
) |>
group_by(rincome) |>
count() |>
ungroup() |>
gt() |>
cols_label(rincome = "Annual Income",
n = "Numbers")
gss_cat|>
mutate(
rincome = fct_lump_n(rincome, n = 6)
) |>
group_by(rincome) |>
count() |>
arrange(desc(n)) |>
ungroup() |>
gt() |>
cols_label(rincome = "Annual Income",
n = "Numbers")
?fct_lump
gss_cat |>
mutate(relig = fct_lump_n(relig, n = 10)) |>
count(relig, sort = TRUE)
gss_cat |>
mutate(relig = fct_lump_n(relig, n = 10)) |>
count(relig)
gss_cat |>
mutate(relig = fct_lump_n(relig, n = 10)) |>
count(relig) |>
gt()
#| label: setup
library(tidyverse)
library(ggthemes)
library(gt)
library(gtExtras)
data("gss_cat")
gss_cat |>
group_by(relig) |>
summarise(n = n_distinct(denom)) |>
arrange(desc(n)) |>
filter(n > 1)
#| label: tbl-q3-ex3
#| tbl-cap: "Cross-Table of the deominations within the three religions"
gss_cat |>
filter(relig %in% c("Protestant", "Christian", "Other")) |>
group_by(relig, denom) |>
tally() |>
spread(relig, n) |>
arrange(desc(Christian)) |>
gt() |>
gt_theme_538()
gss_cat |>
filter(relig %in% c("Protestant", "Christian", "Other")) |>
group_by(relig, denom) |>
tally() |>
spread(relig, n) |>
arrange(desc(Christian)) |>
gt() |>
sub_missing(missing_text = "") |>
gt_theme_538()
#| label: setup
library(tidyverse)
library(nycflights13)
library(lubridate)
data("flights")
names(flights)
today()
today() |>
class()
now()
now() |>
class()
now() |>
class()
?read_csv
?cols
?col_date
date_names_langs()
date_names_langs("af")
?date_names_langs
date_names_langs("en")
date_names_lang("en")
date_names_lang("de")
date_names_lang("af")
date_names_lang("in")
date_names_langs()
date_names_lang("hi")
?date_names
#| label: setup
library(tidyverse)
library(nycflights13)
library(lubridate)
data("flights")
flights
flights
flights
flights |>
mutate(hr = dep_time %/% 100)
flights |>
mutate(
hr = dep_time %/% 100,
min = dep_time %% 100
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
hr = dep_time %/% 100,
min = dep_time %% 100
)
?parse_time
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(time_hrmin = parse_time(as_character(dep_time), format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(time_hrmin = parse_time(as.character(dep_time), format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time)
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M"))
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
dt_pst = paste0(year, "-", month, "-", day)
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
dt_pst = paste0(year, "-", month, "-", day),
date_iso = parse_date(dt_pst, format = "%Y-%m-%e")
)
problems()
problems(...)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
day = day(day)
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
day = as.character(day),
day = ifelse(str_length(day)==1,
paste0("0", day),
day)
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
day = as.character(day),
day = ifelse(str_length(day) == 1,
paste0("0", day),
day),
month = as.character(month),
month = ifelse(str_length(month) == 1,
paste0("0", month),
month),
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
day = as.character(day),
day = ifelse(str_length(day) == 1,
paste0("0", day),
day),
month = as.character(month),
month = ifelse(str_length(month) == 1,
paste0("0", month),
month),
)
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time)
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
day = as.character(day),
day = ifelse(str_length(day) == 1,
paste0("0", day),
day),
month = as.character(month),
month = ifelse(str_length(month) == 1,
paste0("0", month),
month),
date_iso = paste0(year, "-", month, "-", day),
date_iso = parse_date(date_iso, format = "%Y-%m-%d")
)
?mutate
flights |>
select(-c(hour, minute, time_hour)) |>
mutate(
dep_time = as.character(dep_time),
dep_time = if_else(str_length(dep_time) == 3,
paste0("0", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 2,
paste0("00", dep_time),
dep_time),
dep_time = if_else(str_length(dep_time) == 1,
paste0("000", dep_time),
dep_time),
dep_time = if_else(dep_time == "2400",
"0000",
dep_time),
.keep = "unused"
) |>
mutate(time_hrmin = parse_time(dep_time, format = "%H%M")) |>
mutate(
day = as.character(day),
day = ifelse(str_length(day) == 1,
paste0("0", day),
day),
month = as.character(month),
month = ifelse(str_length(month) == 1,
paste0("0", month),
month),
date_iso = paste0(year, "-", month, "-", day),
date_iso = parse_date(date_iso, format = "%Y-%m-%d"),
.keep = "unused"
)
?make_datetime
flights
flights |>
make_date(year = year,
month = month,
day = day)
flights |>
make_date(year = year,
month = month,
day = day)
flights |>
mutate(date = make_date(year = year, month = month, day = day))
flights |>
select(-time_hour, -hour, -minute) |>
mutate(date = make_date(year = year, month = month, day = day))
?make_time
?make_datetime
flights |>
select(-time_hour) |>
mutate(date = make_date(year = year, month = month, day = day))
flights |>
select(-time_hour) |>
mutate(date = make_datetime(year = year,
month = month,
day = day,
hour = hour,
min = minute))
flights |>
select(-time_hour) |>
mutate(date = make_datetime(year = year,
month = month,
day = day,
hour = hour,
min = minute),
.keep = "unused")
flights |>
group_by(hour) |>
summarise(prop_canc = mean(is.na(dep_time)))
flights |>
group_by(hour)
flights |>
group_by(hour) |>
ggplot(aes(x = dep_delay,
y = arr_delay)) +
geom_point()
library(gganimate)
flights |>
group_by(hour) |>
filter(hour == 12) |>
ggplot(aes(x = dep_delay,
y = arr_delay)) +
geom_point()
flights |>
group_by(hour) |>
ggplot(aes(x = dep_delay,
y = arr_delay)) +
geom_point() +
transition_time(hour) +
ease_aes('linear')
library(gganimate)
install.packages("gganimate")
library(gganimate)
flights |>
group_by(hour) |>
ggplot(aes(x = dep_delay,
y = arr_delay)) +
geom_point() +
transition_time(hour) +
ease_aes('linear')
flights |>
group_by(hour) |>
ggplot(aes(x = dep_delay,
y = arr_delay)) +
geom_point(alpha = 0.2) +
labs(title = 'Hour: {frame_time}',
x = 'Departure Delay',
y = 'Arrival Delay') +
theme_minimal()
flights |>
group_by(hour) |>
ggplot(aes(x = dep_delay,
y = arr_delay)) +
geom_point(alpha = 0.2) +
labs(title = 'Hour: {frame_time}',
x = 'Departure Delay',
y = 'Arrival Delay') +
theme_minimal() +
transition_time(hour) +
ease_aes('linear')
